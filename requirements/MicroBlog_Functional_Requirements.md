# Wymagania funkcjonalne MicroBlog

## RF-01: Rejestracja użytkownika

| Pole                     | Opis                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Aktorzy                  | Gość (niezalogowany)<br>System                                                                                                                                                                                                                                                                                                                                                                                                              |
| Przypadki użycia         | UC-01: Rejestracja użytkownika                                                                                                                                                                                                                                                                                                                                                                                                              |
| Priorytet                | Wysoki                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Opis                     | Gość zakłada konto w systemie podając login, hasło i email. System zapisuje użytkownika oraz przechowuje hasło w postaci skrótu (hash) przy użyciu jBCrypt.                                                                                                                                                                                                                                                                                 |
| Warunki początkowe       | Użytkownik nie jest zalogowany.<br>System (aplikacja + baza) jest dostępny.                                                                                                                                                                                                                                                                                                                                                                 |
| Scenariusz główny        | 1. Gość otwiera formularz rejestracji.<br>2. Gość wpisuje login, email i hasło.<br>3. Gość zatwierdza formularz.<br>4. System waliduje dane (wymagane pola, format email, unikalność login/email).<br>5. System hashuje hasło z użyciem jBCrypt.<br>6. System zapisuje użytkownika w bazie.<br>7. System informuje o poprawnej rejestracji i przekierowuje do logowania lub loguje automatycznie (w zależności od implementacji).           |
| Scenariusze alternatywne | A1: Brak wymaganych danych<br>1) W kroku 4 system wykrywa brak loginu/hasła/email.<br>2) System odrzuca rejestrację i pokazuje komunikat o błędzie.<br><br>A2: Login lub email już istnieje<br>1) W kroku 4 system wykrywa konflikt unikalności.<br>2) System odrzuca rejestrację i pokazuje komunikat.<br><br>A3: Błąd bazy danych<br>1) W kroku 6 występuje wyjątek zapisu.<br>2) System nie tworzy konta i pokazuje komunikat o błędzie. |
| Kryteria akceptacji      | System nie zapisuje hasła w postaci jawnej; w bazie istnieje tylko `password_hash`.<br>Próba rejestracji z istniejącym loginem/email kończy się błędem.<br>Po poprawnej rejestracji użytkownik może się zalogować utworzonym kontem.                                                                                                                                                                                                        |

## RF-02: Logowanie / Wylogowanie

| Pole                     | Opis                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Aktorzy                  | Gość (logowanie)<br>Użytkownik zalogowany (wylogowanie)<br>System                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Przypadki użycia         | UC-02: Logowanie<br>UC-03: Wylogowanie                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Priorytet                | Wysoki                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Opis                     | Użytkownik loguje się podając login i hasło. System weryfikuje hasło (jBCrypt) i tworzy sesję. Użytkownik może zakończyć sesję poprzez wylogowanie.                                                                                                                                                                                                                                                                                                                                                                                             |
| Warunki początkowe       | Logowanie: użytkownik nie jest zalogowany.<br>Wylogowanie: użytkownik jest zalogowany (aktywna sesja).                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Scenariusz główny        | Logowanie:<br>1. Gość otwiera formularz logowania.<br>2. Gość podaje login i hasło.<br>3. Gość zatwierdza formularz.<br>4. System pobiera użytkownika po loginie.<br>5. System porównuje hasło z `password_hash` (BCrypt).<br>6. System tworzy sesję i zapisuje identyfikator użytkownika (np. `username` lub `userId`).<br>7. System przekierowuje użytkownika do panelu/dashboardu.<br><br>Wylogowanie:<br>1. Użytkownik wybiera akcję „Wyloguj”.<br>2. System unieważnia sesję (invalidate).<br>3. System przekierowuje na stronę publiczną. |
| Scenariusze alternatywne | A1: Niepoprawne dane logowania<br>1) W kroku 4 lub 5 system wykrywa brak użytkownika albo niezgodne hasło.<br>2) System nie tworzy sesji i pokazuje komunikat.<br><br>A2: Sesja wygasła / brak sesji<br>1) System traktuje użytkownika jak niezalogowanego i wymaga ponownego logowania.                                                                                                                                                                                                                                                        |
| Kryteria akceptacji      | Po poprawnym logowaniu sesja jest aktywna do momentu wylogowania.<br>Po wylogowaniu dostęp do zasobów wymagających logowania jest zablokowany.<br>Przy błędnym haśle/loginie system nie tworzy sesji.                                                                                                                                                                                                                                                                                                                                           |

## RF-03: Tworzenie postów

| Pole                     | Opis                                                                                                                                                                                                                                                                                |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Aktorzy                  | Użytkownik zalogowany<br>System                                                                                                                                                                                                                                                     |
| Przypadki użycia         | UC-04: Dodanie posta                                                                                                                                                                                                                                                                |
| Priorytet                | Wysoki                                                                                                                                                                                                                                                                              |
| Opis                     | Zalogowany użytkownik publikuje post. System zapisuje treść oraz datę publikacji (`created_at`).                                                                                                                                                                                    |
| Warunki początkowe       | Użytkownik jest zalogowany.                                                                                                                                                                                                                                                         |
| Scenariusz główny        | 1. Użytkownik otwiera formularz dodawania posta.<br>2. Użytkownik wpisuje treść posta.<br>3. Użytkownik publikuje post.<br>4. System waliduje treść (np. niepusta, maksymalna długość).<br>5. System zapisuje post wraz z `created_at`.<br>6. System wyświetla post na linii czasu. |
| Scenariusze alternatywne | A1: Użytkownik niezalogowany<br>1) System blokuje dostęp do publikacji i przekierowuje do logowania.<br><br>A2: Treść posta niepoprawna<br>1) W kroku 4 system odrzuca post i pokazuje komunikat.                                                                                   |
| Kryteria akceptacji      | Po dodaniu posta jest on widoczny na linii czasu autora.<br>Każdy post ma ustawioną datę publikacji (`created_at`).<br>System nie pozwala dodać posta o pustej treści.                                                                                                              |

## RF-04: Publiczne posty

| Pole                     | Opis                                                                                                                                                   |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Aktorzy                  | Gość<br>Użytkownik zalogowany<br>System                                                                                                                |
| Przypadki użycia         | UC-05: Przeglądanie postów publicznych                                                                                                                 |
| Priorytet                | Średni                                                                                                                                                 |
| Opis                     | System umożliwia przeglądanie publicznych postów bez logowania.                                                                                        |
| Warunki początkowe       | System jest dostępny.                                                                                                                                  |
| Scenariusz główny        | 1. Użytkownik/Gość otwiera widok postów publicznych.<br>2. System pobiera listę publicznych postów.<br>3. System wyświetla posty (np. od najnowszych). |
| Scenariusze alternatywne | A1: Brak postów<br>1) System wyświetla pustą listę i komunikat „Brak postów”.                                                                          |
| Kryteria akceptacji      | Posty publiczne są dostępne bez logowania.<br>Lista postów jest poprawnie renderowana dla użytkownika.                                                 |

## RF-05: Follow / Unfollow

| Pole                     | Opis                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Aktorzy                  | Użytkownik zalogowany<br>System                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Przypadki użycia         | UC-06: Obserwowanie użytkownika (Follow)<br>UC-07: Cofnięcie obserwowania (Unfollow)                                                                                                                                                                                                                                                                                                                                                                  |
| Priorytet                | Średni                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Opis                     | Użytkownik może obserwować innych użytkowników. Posty obserwowanych osób pojawiają się na jego dashboardzie (linii czasu). Po Unfollow posty tej osoby znikają z dashboardu.                                                                                                                                                                                                                                                                          |
| Warunki początkowe       | Użytkownik jest zalogowany.<br>Użytkownik, którego chcemy obserwować, istnieje.                                                                                                                                                                                                                                                                                                                                                                       |
| Scenariusz główny        | Follow:<br>1. Użytkownik wybiera profil/innego użytkownika.<br>2. Użytkownik klika „Follow”.<br>3. System zapisuje relację obserwowania.<br>4. System aktualizuje dashboard tak, aby zawierał posty obserwowanego użytkownika.<br><br>Unfollow:<br>1. Użytkownik wybiera obserwowanego użytkownika.<br>2. Użytkownik klika „Unfollow”.<br>3. System usuwa relację obserwowania.<br>4. System aktualizuje dashboard, usuwając z niego posty tej osoby. |
| Scenariusze alternatywne | A1: Próba obserwowania samego siebie<br>1) System blokuje akcję i informuje o błędzie.<br><br>A2: Relacja już istnieje<br>1) System nie tworzy duplikatu (operacja jest idempotentna) i pozostawia stan bez zmian.<br><br>A3: Użytkownik niezalogowany<br>1) System przekierowuje do logowania.                                                                                                                                                       |
| Kryteria akceptacji      | Po Follow posty obserwowanego pojawiają się na dashboardzie.<br>Po Unfollow posty obserwowanego nie są widoczne na dashboardzie.<br>System nie pozwala obserwować samego siebie.                                                                                                                                                                                                                                                                      |
